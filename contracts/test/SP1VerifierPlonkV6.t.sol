// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import {Test} from "forge-std/Test.sol";
import {SP1Verifier} from "../src/v6.0.0-beta.1/SP1VerifierPlonk.sol";

contract SP1VerifierPlonkV6Test is Test {
    bytes32 internal constant PROGRAM_VKEY =
        bytes32(0x00502858e1222437b63f4b710c8fd5e45a3c3797e02a84d9b70d97c9d22286e7);
    bytes internal constant PUBLIC_VALUES =
        hex"00000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000001a6d0000000000000000000000000000000000000000000000000000000000002ac2";
    bytes internal constant PROOF_BYTES =
        hex"433cef0e000000000000000000000000000000000000000000000000000000000000000000410a5637e8b7b8c4b895991b4892efd0ff4da2b5e277d701f2f5c1f23d0c7b00000000000000000000000000000000000000000000000000000000000000002cdc3eb52d2d244263b5acd4dcc5a4534fb4cd7c5ca52f1a41f930ce7c75271b22f7003733fab222b0543566e147d5808b48b534aca73d6d5eb87c6cd8e5a8462437c8eb65ce39f5238f506023ac962bcd6aa1af2df85cf4316e53767d10ecd11ef1967d5e4bf4d91363d80e5ef9882c92455492fa1f6733e38e2360a8f5078509721ebcccf5f425fe0993d54185d04cc664f477d6c1550d326e11511e58effd2f2e16a1013108a7753d3432c1478e872bb531c6d2ecfacd676464b53e92412c027d1c04125467ecda59aeddcfc0ac3c8635b8ae110782f41284ba15c9ca687d22c9d9c6a68433e5ab8f4f216a1208257eb61059452d681ed1f8bc0b8cc5c73d1de5c01b9ced642bb278eeafe31be8b67b8f7b7effa5167e171f20f2e9bd5abe298c069e9a46f62086bafdbf76416dde6c84ae8f71d7c81024d801fc89e76d0f1d74611cfb3207d25ed9a428c9f0ba01e8ba46d0cd269de64cf61554fcbf2e7e1f3a65a63e9c1e89dab3b8bfb2e9f834840b1b93029c38df8b3b44ffdd0e4f051adbd965a1941b8cf562c1149ead979f2972624c31428a6cd36c8801d796749a18abcaa27ce117accf6776cff9b02c9b1cb9f35f86d973f04f49cc03aa42c22229cc9f0834be31b551a2a542c75c00a026e755195a5d34dec1db0c417d35aa552c8694e3ff5201ff3668ec5cdffdb2a75ed7223996d193c4ccd9d3c615cb191b056630f8562f4367a0d6f917bba6f7ef6838ae0a44605030be068d73d36ae9302e0c911a6642e5617a44092366269f2e70826bc7d2899bf760458bcbed8b9569171af5790434644d81f05705ae12567ac7ba5b3c36d49ad4c4326354adece6c406534a1a8a8c185ad7bf7c1f4a9cf72d1fbc0046b9952f161da41f488fe68a221a595fe87717b1273715d8f78ecce219276e941bc22ff78c97fadb7a6995eb3b2076b6271addceba1dbda36f1b8700aa739d62d18df73e798608ee7abbe74ef0132f5c78df779f25bc456b80594247fc8d95b1d15035692350a28493d404d58c08f5db3cb052beaac706ad1197aa794c619500f210af8fbc04180210758c973e2b889b6727d66b9c232ff71081cbaaf3274b7a96f429f94ffd3b0f4323823e6009bc0cfd06e8bcc68bcd952174ff37e9dca2345424237e3b2a0eea2eca897f2724aef3cf07d9242687ae2da460f1c1454b7022f050ee0b29f376ce75a38506ab";

    address internal verifier;

    /// @notice Should succeed when the proof is valid.
    function setUp() public virtual {
        verifier = address(new SP1Verifier());
    }

    /// @notice Test proof verification with v6 verifier (expected to fail).
    /// @dev The v6 verifier has a slightly updated format for the proof nonce and the proof size.
    function test_VerifyProof_V6() public view {
        SP1Verifier(verifier).verifyProof(PROGRAM_VKEY, PUBLIC_VALUES, PROOF_BYTES);
    }
}
